<?xml version="1.0" encoding="UTF-8" ?>
<templates xml:space="preserve">

    <t t-inherit="mail.Chatter" t-inherit-mode="extension">
        <!-- 1. Hide the whole chatter if requested  -->
        <!-- o-mail-ChatterContainer o-mail-Form-chatter o-aside w-print-100 -->
        <xpath expr="//div[contains(@class, 'o-mail-Chatter')]" position="attributes">
            <attribute name="t-if" add="!this.hideChatter" separator=" and " />
        </xpath>

        <!-- 2. Send message button -->
        <xpath expr="//button[contains(@class, 'o-mail-Chatter-sendMessage')]" position="attributes">
            <attribute name="t-if" add="!this.hideSendMessage" separator=" and "/>
        </xpath>

        <!-- 3. Log note button -->
        <xpath expr="//button[contains(@class, 'o-mail-Chatter-logNote')]" position="attributes">
            <attribute name="t-if" add="!this.hideLogNotes" separator=" and "/>
        </xpath>

        <!-- 4. Activities button -->
        <xpath expr="//button[contains(@class, 'o-mail-Chatter-activity')]" position="attributes">
            <attribute name="t-if" add="!this.hideScheduleActivity" separator=" and "/>
        </xpath>

        <!-- 5. Search messages icon -->
        <xpath expr="//button[@aria-label='Search Messages']" position="attributes">
            <attribute name="t-if" add="!this.hideSearchMessageIcon" separator=" and "/>
        </xpath>

        <!-- 6. Followers dropdown icon -->
        <xpath expr="//div[contains(@class, 'o-mail-Followers')]" position="attributes">
            <attribute name="t-if" add="!this.hideFollowersIcon" separator=" and "/>
        </xpath>

        <!-- 7. Follow / Unfollow buttons -->
        <xpath expr="//div[contains(@class, 'o-mail-Followers')]" position="attributes">
            <attribute name="t-if" add="!this.hideFollowUnfollow" separator=" and "/>
        </xpath>
        <xpath expr="//button[contains(@class, 'o-mail-Chatter-follow')]" position="attributes" >
            <attribute name="t-if" add="!this.hideFollowUnfollow" separator=" and "/>
        </xpath>
        <xpath expr="//button[@t-if='state.thread.selfFollower']" position="attributes" >
            <attribute name="t-if" add="!this.hideFollowUnfollow" separator=" and "/>
        </xpath>
    </t>

    <!-- 8. Hide the attachment (paperclip) icon (template mail.Chatter.attachFiles) -->
    <t t-inherit="mail.Chatter.attachFiles" t-inherit-mode="extension">
        <xpath expr="//button[contains(@class, 'o-mail-Chatter-attachFiles')]" position="attributes">
            <attribute name="t-if" add="!this.hideAttachmentIcon" separator=" and "/>
        </xpath>
    </t>
</templates>
